# AI小说创作完整指南 - Prompt模板

> **版本**: v1.0.0 | **更新日期**: 2026-01-07  
> **用途**: AI助手（Kiro/Claude）创作小说时的标准流程和搜索策略

---

## 📋 目录

1. [工作流程总览](#1-工作流程总览)
2. [小说类型与搜索策略](#2-小说类型与搜索策略)
3. [Phase 0: 资料收集](#3-phase-0-资料收集)
4. [Phase 1: 智能设计](#4-phase-1-智能设计)
5. [Phase 2-5: 自动化执行](#5-phase-2-5-自动化执行)
6. [记忆与持久化策略](#6-记忆与持久化策略)

---

## 1. 工作流程总览

```
用户输入需求
      │
      ▼
┌─────────────────────────────────────────────────────────────────┐
│ Phase 0: 资料收集（15-30分钟）                                   │
│  - 根据小说类型确定搜索策略                                      │
│  - 执行多轮网络搜索（web_search）                                │
│  - 整理搜索结果，提取关键信息                                    │
│  - 【关键】将资料写入项目设定，永久保存                          │
└─────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────┐
│ Phase 1: 智能设计（30-60分钟）                                   │
│  - 创建项目，写入世界观（含搜索资料）                            │
│  - 创建角色（80-150个）                                          │
│  - 创建大纲（100章）                                             │
│  - 展开章节记录                                                  │
└─────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────┐
│ Phase 2: 内容生成（8-24小时，后台自动）                          │
│  - 批量生成100章 × 10000字                                       │
│  - RTCO上下文框架保证连贯性                                      │
│  - 失败自动重试                                                  │
└─────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────┐
│ Phase 3: 二次优化（4-8小时，后台自动）                           │
│  - Claude Opus/Sonnet 三段式精修                                 │
│  - 保存优化版本                                                  │
└─────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────┐
│ Phase 4: 质量验证（1-2小时）                                     │
│  - 一致性检测（流式API）                                         │
│  - 重复检测（流式API）                                           │
│  - 质量评分                                                      │
└─────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────┐
│ Phase 5: 导出交付（即时）                                        │
│  - 导出TXT/Markdown                                              │
│  - 导出优化对比报告                                              │
└─────────────────────────────────────────────────────────────────┘
      │
      ▼
最终成品（100章，约100万字）
```

---

## 2. 小说类型与搜索策略

### 2.1 类型总览

| 类型代码 | 类型名称 | 核心特点 | 搜索重点 |
|----------|----------|----------|----------|
| `HISTORY` | 历史小说 | 真实历史背景 | 历史事件、人物、制度、风俗 |
| `SCIFI` | 科幻小说 | 科技与未来 | 科技趋势、未来预测、科幻设定 |
| `FANTASY` | 玄幻小说 | 修仙体系 | 境界划分、法宝、神话传说 |
| `XIANXIA` | 仙侠小说 | 侠义与修仙 | 门派、武功、江湖恩怨 |
| `URBAN` | 都市小说 | 现代都市生活 | 行业背景、职场、城市特色 |
| `ROMANCE` | 言情小说 | 情感为主线 | 情感心理、社会背景、人物关系 |
| `SUSPENSE` | 悬疑推理 | 案件与推理 | 犯罪心理、侦查技术、法律程序 |
| `HORROR` | 恐怖惊悚 | 恐怖氛围 | 民俗传说、心理恐惧、灵异设定 |
| `MILITARY` | 军事小说 | 战争与军队 | 军事装备、战术、历史战役 |
| `GAME` | 游戏小说 | 游戏世界 | 游戏机制、等级系统、副本设定 |
| `SPORTS` | 竞技体育 | 体育竞技 | 运动规则、训练方法、赛事 |
| `FANFIC` | 同人小说 | 基于原作 | 原作设定、角色、世界观 |
| `SYSTEM` | 系统流 | 金手指系统 | 系统设定参考、升级机制 |
| `REBIRTH` | 重生穿越 | 时空穿越 | 目标时代背景、蝴蝶效应 |
| `APOCALYPSE` | 末日废土 | 末日生存 | 灾难类型、生存技能、社会崩溃 |

---

### 2.2 详细搜索策略

#### 📜 历史小说 (HISTORY)

**适用场景**: 明末、三国、唐宋、民国等历史背景

**搜索清单**:
```
□ "{时代} 重大历史事件 时间线"
□ "{时代} 重要历史人物 生平"
□ "{时代} 官职制度 品级"
□ "{时代} 军事制度 军队编制"
□ "{时代} 经济状况 货币 物价"
□ "{时代} 社会风俗 礼仪"
□ "{时代} 服饰 饮食 建筑"
□ "{时代} 地理 城市 交通"
□ "{时代} 历史小说 推荐 设定参考"
```

**写入项目设定**:
- `world_time_period`: 具体年份、重大事件
- `world_location`: 地理环境、城市布局
- `world_rules`: 政治制度、社会规则
- 角色背景: 真实历史人物信息

---

#### 🚀 科幻小说 (SCIFI)

**适用场景**: 近未来、星际、赛博朋克、AI觉醒

**搜索清单**:
```
□ "{年份} 科技发展 AI 最新进展"
□ "未来科技预测 {领域}"
□ "科幻小说 {子类型} 经典设定"
□ "{科技公司} 最新动态 产品"
□ "太空探索 最新发现"
□ "人工智能 伦理 争议"
□ "赛博朋克 设定 元素"
□ "硬科幻 软科幻 区别 设定"
```

**子类型搜索**:
- 近未来: 当前科技趋势、社会变化
- 星际: 星际旅行、外星文明、太空战舰
- 赛博朋克: 义体改造、网络空间、企业统治
- AI觉醒: 人工智能、意识上传、人机关系

---

#### ⚔️ 玄幻小说 (FANTASY)

**适用场景**: 东方玄幻、异世大陆、升级流

**搜索清单**:
```
□ "玄幻小说 境界划分 体系"
□ "修炼体系 设定 参考"
□ "法宝 灵兽 设定"
□ "玄幻小说 势力设定"
□ "玄幻小说 金手指 类型"
□ "东方神话 神兽 仙人"
□ "玄幻小说 排行榜 经典"
```

**常见境界体系**:
- 炼气→筑基→金丹→元婴→化神→渡劫→大乘
- 武者→武师→武王→武皇→武帝→武神

---

#### 🗡️ 仙侠小说 (XIANXIA)

**适用场景**: 古典仙侠、现代修真、剑修

**搜索清单**:
```
□ "仙侠小说 门派设定"
□ "剑修 设定 境界"
□ "道家 佛家 修炼体系"
□ "仙侠 法宝 飞剑 设定"
□ "江湖恩怨 设定 参考"
□ "仙侠小说 经典 推荐"
□ "古代武功 招式 名称"
```

---

#### 🏙️ 都市小说 (URBAN)

**适用场景**: 都市生活、职场、商战、异能

**搜索清单**:
```
□ "{行业} 工作流程 职位"
□ "{城市} 特色 地标 生活"
□ "{行业} 公司 排名"
□ "都市小说 {子类型} 推荐"
□ "{行业} 术语 黑话"
□ "创业 融资 流程"
□ "{城市} 房价 生活成本"
```

**子类型**:
- 职场: 行业背景、晋升路径
- 商战: 商业模式、并购案例
- 异能: 都市异能设定参考
- 医生/律师: 专业知识、案例

---

#### 💕 言情小说 (ROMANCE)

**适用场景**: 现代言情、古代言情、总裁文、甜宠

**搜索清单**:
```
□ "言情小说 {子类型} 经典"
□ "{背景} 社会风俗 婚恋"
□ "情感心理学 恋爱阶段"
□ "{职业} 工作日常"
□ "言情小说 人设 类型"
□ "{时代} 女性地位 生活"
□ "甜宠文 虐文 设定特点"
```

**子类型**:
- 现代言情: 都市背景、职场恋爱
- 古代言情: 宫斗、宅斗、江湖
- 总裁文: 商业背景、豪门设定
- 甜宠: 轻松日常、撒糖设定
- 虐恋: 情感冲突、误会设定

---

#### 🔍 悬疑推理 (SUSPENSE)

**适用场景**: 刑侦、推理、犯罪、心理

**搜索清单**:
```
□ "刑事侦查 流程 技术"
□ "法医学 基础知识"
□ "犯罪心理学 分析"
□ "推理小说 诡计类型"
□ "警察 职级 分工"
□ "法律程序 刑事案件"
□ "悬疑小说 经典 推荐"
□ "密室杀人 不在场证明 设定"
```

---

#### 👻 恐怖惊悚 (HORROR)

**适用场景**: 灵异、克苏鲁、心理恐怖、民俗恐怖

**搜索清单**:
```
□ "恐怖小说 类型 设定"
□ "民俗恐怖 传说 禁忌"
□ "克苏鲁 神话 设定"
□ "心理恐怖 技巧"
□ "鬼故事 民间传说"
□ "恐怖氛围 营造方法"
□ "日本恐怖 设定 特点"
```

---

#### 🎖️ 军事小说 (MILITARY)

**适用场景**: 现代军事、历史战争、特种兵

**搜索清单**:
```
□ "{军种} 编制 军衔"
□ "{武器装备} 参数 性能"
□ "军事战术 {类型}"
□ "{战役} 历史 过程"
□ "特种部队 训练 装备"
□ "军事小说 经典 推荐"
□ "{国家} 军队 特点"
```

---

#### 🎮 游戏小说 (GAME)

**适用场景**: 网游、电竞、游戏穿越

**搜索清单**:
```
□ "{游戏类型} 机制 设定"
□ "网游小说 系统设定"
□ "电竞 职业选手 生活"
□ "{具体游戏} 设定 背景"
□ "游戏小说 经典 推荐"
□ "MMORPG 副本 设定"
□ "游戏直播 行业 现状"
```

---

#### ⚽ 竞技体育 (SPORTS)

**适用场景**: 足球、篮球、电竞、格斗

**搜索清单**:
```
□ "{运动} 规则 术语"
□ "{运动} 训练方法"
□ "{运动} 职业联赛 赛制"
□ "{运动} 明星球员 故事"
□ "体育小说 经典 推荐"
□ "{运动} 战术 分析"
□ "运动员 日常 生活"
```

---

#### 📖 同人小说 (FANFIC)

**适用场景**: 基于已有作品的二次创作

**搜索清单**:
```
□ "{原作名} 世界观 设定"
□ "{原作名} 角色 性格 能力"
□ "{原作名} 时间线 剧情"
□ "{原作名} 势力 组织"
□ "{原作名} 同人小说 热门"
□ "{原作名} 粉丝讨论 热点"
□ "{原作名} 官方设定集"
```

**同人类型处理**:
| 类型 | 说明 | 处理方式 |
|------|------|----------|
| 原创主角 | OC融入原作世界 | 设计原创角色，原作角色为配角 |
| 穿越重生 | 穿越到原作世界 | 设计金手指，改变原作走向 |
| 原作视角 | 以原作角色为主角 | 严格遵循角色性格 |
| 平行世界AU | 改变世界设定 | 保留角色性格，改变背景 |

---

#### 💻 系统流 (SYSTEM)

**适用场景**: 带系统的各类小说

**搜索清单**:
```
□ "系统流小说 系统类型"
□ "金手指 设定 参考"
□ "签到系统 设定"
□ "任务系统 设定"
□ "系统流小说 经典 推荐"
□ "升级机制 设定"
```

---

#### 🔄 重生穿越 (REBIRTH)

**适用场景**: 重生、穿越、快穿

**搜索清单**:
```
□ "{目标时代} 历史背景"
□ "重生小说 金手指 类型"
□ "穿越小说 设定 参考"
□ "快穿小说 世界类型"
□ "{目标时代} 生活细节"
□ "蝴蝶效应 历史改变"
```

---

#### ☢️ 末日废土 (APOCALYPSE)

**适用场景**: 丧尸、核战后、自然灾害

**搜索清单**:
```
□ "末日小说 灾难类型"
□ "生存技能 野外求生"
□ "末日 社会崩溃 设定"
□ "丧尸 设定 类型"
□ "废土 设定 参考"
□ "末日小说 经典 推荐"
□ "核战后 世界 设定"
```

---

## 3. Phase 0: 资料收集

### 3.1 执行流程

```python
# 伪代码：资料收集流程

def collect_materials(novel_type, user_requirements):
    """
    Phase 0: 资料收集
    """
    # 1. 确定搜索策略
    search_strategy = get_search_strategy(novel_type)
    
    # 2. 执行搜索
    search_results = []
    for query in search_strategy.queries:
        result = web_search(query)
        search_results.append(result)
    
    # 3. 提取关键信息
    key_info = extract_key_info(search_results)
    
    # 4. 生成资料报告
    report = generate_material_report(key_info)
    
    return report, key_info
```

### 3.2 搜索结果处理

**提取的信息类型**:
- 世界观设定（时代、地点、规则）
- 角色原型（历史人物、原作角色）
- 情节素材（真实事件、经典桥段）
- 专业知识（行业术语、技术细节）

---

## 4. Phase 1: 智能设计

### 4.1 项目创建

```json
{
  "title": "小说标题",
  "genre": "小说类型",
  "description": "故事简介（融入搜索资料）",
  "target_words": 1000000,
  "world_time_period": "时代背景（来自搜索）",
  "world_location": "地理设定（来自搜索）",
  "world_atmosphere": "社会氛围",
  "world_rules": "世界规则（来自搜索）"
}
```

### 4.2 角色设计原则

| 角色来源 | 数量 | 处理方式 |
|----------|------|----------|
| 用户指定 | 5-10 | 按用户描述创建 |
| 搜索获取 | 10-30 | 历史人物/原作角色 |
| AI原创 | 50-100 | 根据故事需要设计 |

### 4.3 大纲设计原则

- 融入搜索到的真实事件/原作剧情
- 参考优秀作品的节奏结构
- 确保情节合理、有张力
- 每章大纲100-300字

---

## 5. Phase 2-5: 自动化执行

### 5.1 API调用序列

```bash
# Phase 2: 内容生成
POST /api/chapters/project/{id}/batch-generate
  {"start_chapter_number": 1, "count": 100, "target_word_count": 10000}

# Phase 3: 二次优化
POST /api/refinement/project/{id}/all
  {"model": "opus"}

# Phase 4: 质量验证
POST /api/consistency/chapter/{id}/check-stream
GET /api/duplicate/project/{id}/check-stream

# Phase 5: 导出
GET /api/refinement/project/{id}/export?format=txt
```

### 5.2 进度监控

定期检查并报告：
- 生成进度：已完成 X/100 章
- 优化进度：已优化 X/100 章
- 质量评分：平均分 X 分

---

## 6. 记忆与持久化策略

### 6.1 数据持久化

| 数据类型 | 存储位置 | 持久性 |
|----------|----------|--------|
| 项目信息 | 数据库 projects 表 | ✅ 永久 |
| 世界观设定 | 数据库 projects 表 | ✅ 永久 |
| 角色设定 | 数据库 characters 表 | ✅ 永久 |
| 大纲内容 | 数据库 outlines 表 | ✅ 永久 |
| 章节内容 | 数据库 chapters 表 | ✅ 永久 |
| 优化版本 | 数据库 refinements 表 | ✅ 永久 |
| 搜索资料 | 写入项目设定 | ✅ 永久 |

### 6.2 对话中断恢复

```bash
# 恢复生成任务
python auto_resume.py --daemon

# 查询项目状态
curl -b /tmp/cookies.txt "$BASE_URL/api/projects"
```

---

*最后更新: 2026-01-07 | 版本: v1.0.0*
